name: Test Codes

on:
  pull_request:
    branches:
      - develop

jobs:
  test-core-where-were-we:
    timeout-minutes: 5
    name: test core www
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./backend/core-where-were-we
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: Set up Docker
        uses: docker/setup-buildx-action@v3
      - name: Run test
        run: docker compose up app --exit-code-from app

  check-front-end-format:
    timeout-minutes: 3
    name: check front format
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: ./frontend
    steps:
      - name: Checkout
        uses: actions/checkout@v3
      - name: setup Bun
        uses: oven-sh/setup-bun@v1
      - name: Install package
        run: bun install
      - name: check format
        run: bun run format:check

  action-timeline:
    needs:
      - test-core-where-were-we
      - check-front-end-format
    permissions:
      actions: read
    runs-on: ubuntu-latest
    steps:
      - name: time line
        uses: Kesin11/actions-timeline@v2s